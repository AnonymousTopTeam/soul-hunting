language: node_js
node_js:
- '7'
branches:
  only:
  - master
env:
  global:
    - secure: "kQ4K2PdNXAATNPC+djydgHX9xLQHekQIq815zeUeXAZ5g4GFEo/goQQxS6B4nX/pwX8e8S6luN1UFKZaksWddIdXtD/WqW1KTwn+3n/KiIqbM01LQU0R+slNF3/cF0V0SlulRDKUpam6NDYTnTTG+Ch2Lr2UeArxa9GVUta40aIpcWJZXEPK1/YWk7w07MD5qfHvgJ25aK9/mFWUQUt42J42HHKAGcI18EJtJfsxKX7nx8rYngBiTNiSjss/uBatXj+ltvUYVVEnkmKh5ickDxOopyLE6dKYOLoJ53IPjRQImGIhmL547Yu96tCoNrGyeRRVL7kN//BQE1hrQBF4TWcrrj3e3gtQ3ienZ5h1uWzgZcdi+ivXppu8Naew2FqIdaWjBFbo7Wy39RFQqzxqtoTNLy86ZiudQbXSw28YHTCDy7S4ZYWtYEQArFdESce7FPjqgoV6FF5rQC2OLWd8BD4J4GMU1rJ2a4BxW8ji3P+hY2CmhJKjPkp1W3ZuY20XeUGj8Pnu936FVmgZQT6ZZBrF1bC02lmtcvyXBcbPOsu8T7qsPNScoEgpmt2bD28rmCbSRzjN57nwBsrFgwRvV6JI7Yho0N583/4HclWCrOf2GjYGog3idwawDB8d7mUNV5hKU3ddtJjxHpP9n5FLsbK9BG2LusHfWtCua5IjPqo="
    - secure: "Qdl73FZzJq3Ozd5ewTFdH5777VjumjU3t0KZxSX6CCRzRkHLc8VRGY/o121dAmlOLBVpBxaSbcnNwAMqBgxFo/eZL28E3we89yrFDnomeRyZUkkyf6QmQBtB8Y/gfyxZMQIh6JypOEWPlBTFOuvLmP4NiCgN081ANo2SfQiH9s10TpWsrulmpoxhs6GpULXXNQRMaya6LMIQdIfxpSkrsZrTUFy1XWfea75GZs0UBdyy+C3wL0hK5ehphUGLHVw1G3ezXOXSSUqzgIwII5t9ftySeRTLlSMkOSNbI0MjocaVAz0wRz9kVN7tXct0gLXiY9MYwaZFWoLCk/6Z/rmuKzbqK6Gcjt5OVGYLqIctjIQFrdV5Jgg8iKJzyQOI13vwcII5R+zMLVrebJk2l1jUQsdIVhy8BtT5p1j2MiB1oHVkYjC7239ZFPqun4MJbIdoGoAx6uuTcGLzF0cvKfOOZiWAn50eRcDTTGR0MgmtLFdchGEOJBC0RDyPfEkRqJMV+/e+IccqoX+KSbUZLFyvAbKscQcC2MZaBKYdV3yvtSQDtTRwzJ+GXBsC8dqJSOs2LIRWBQO34o2VvXCAqIxfZRay/FHygHBtSH9iQi1+uNhkbAA62DqeSxRQR6+DS1ACPivPt/2YQE7ixlRov1Bz5hdUO1zqL+sBxMNavUXHs0E="
    - secure: "S9U+tFsc96oF9h4b8zZeu+/JkLA5GrWQWEwbAN31FKJzE5eJuFHkAN9y19r+cV9Ytf4HVmUhxDhTH0kxhh7b/E8tn6z3YVRmR0C0SnvX4MHBt00Zl0DnWu154QlpDEPYr+43CFOzUXk6E72AJ3PjyC91tkI/UU4rcauKxjYMaA3DoA3Km7HHGFoNAKT5b9jVUsgVen0CsCJquN0aFfLH0DbOjNEXl0jQXKSNCMYrmhzu4SGx2i5tJ3gBkglF/Uk+5pVBfE/iBZV1iYHGt5dYV7w2fD9JuyDpl6jd+KSHsIC1SLkQoU7Apevyvb4Ipg4oUJpPgHpuie4JQRF840UVU8hXhPpL6c6F1wy0p9DIwhDdZC/EkgzTUjD3HAVXdv/ETILcuXn3VtoZdCaNgue8ACFfFosGcKcFidfnHcnrYkVz7/t3PjCx45BfHWiDICv8sy+u9bNh7GjiirrhIp5yx19qveoBEEF0ElfJieb5w+ioLRKOA9B6rLq0dQC+nem7ziY5Z98VPoQP5Xfeomb+MLzs45TQYK17fKzoENoBHYcBen/uBaE07K5i1Bqb6KD0CSV8uqbbbD30xv7P7eqYIT+sNdoFAIAgEjQupdYqgoXYadFxi400xlrvRAnNsffS9n2adSPy7PgpXW7TPBy6Gy5POnXzPF2h4JeuUPcHefE="
addons:
  apt:
    packages:
      - sshpass
before_script:
  - npm install
script:
  - npm run webpack-prod
after_success:
  - mkdir archive
  - mv * archive
  - tar -czf package.tgz archive
  - export SSHPASS=$DEPLOY_PASS
  - ssh $DEPLOY_USER@$DEPLOY_HOST $DEPLOY_PATH/deploy.sh